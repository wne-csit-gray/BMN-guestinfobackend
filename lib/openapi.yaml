# DO NOT EDIT THIS FILE
# This file is generated by the build in the API project.
openapi: 3.0.3
servers:
  - url: 'http://localhost'
info:
  title: GuestInfoSystemAPI
  description: Guest information for Bear Necessities Market
  version: 0.1.0
  contact:
    name: Bear Necessities Market
    email: info@librefoodpantry.org
    url: https://librefoodpantry.org
paths:
  /guests:
    description: All guests
    get:
      description: Gets all guests data.
      operationId: listGuests
      x-eov-operation-handler: endpoints
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuestArray'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      description: Adds a new guest's data.
      operationId: createGuest
      x-eov-operation-handler: endpoints
      requestBody:
        description: Guest data
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Guest'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guest'
          headers:
            Location:
              description: URI of new item.
              explode: false
              required: true
              schema:
                minLength: 1
                nullable: false
                type: string
              style: simple
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/ServerError'
  '/guests/{BNMID}':
    description: Guest with given id.
    parameters:
      - name: BNMID
        in: path
        required: true
        description: BNM issued unique ID of the guest whose info is desired.
        schema:
          $ref: '#/components/schemas/BNMID'
    get:
      description: Gets guest's data.
      operationId: retrieveGuest
      x-eov-operation-handler: endpoints
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guest'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      description: Modifies guest's data.
      operationId: replaceGuest
      x-eov-operation-handler: endpoints
      requestBody:
        description: Guest data
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Guest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guest'
          headers:
            Location:
              description: URI of new item.
              explode: false
              required: true
              schema:
                minLength: 1
                nullable: false
                type: string
              style: simple
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      description: Deletes a guest's data.
      operationId: deleteGuest
      x-eov-operation-handler: endpoints
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guest'
          headers:
            Location:
              description: URI of new item.
              explode: false
              required: true
              schema:
                minLength: 1
                nullable: false
                type: string
              style: simple
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /visits:
    description: Record of visits for Guests using the Bear Necessities Market
    get:
      description: All visits
      operationId: listVisits
      x-eov-operation-handler: endpoints
      responses:
        '200':
          description: OK
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/VisitArray'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/ServerError'
    post: 
      description: Add a new guest's visit
      operationId: createVisit
      x-eov-operation-handler: endpoints
      requestBody:
        description: Visit data
        required: true
        content: 
          application/json:
            schema: 
              $ref: '#/components/schemas/Visit'
      responses:
        '201':
          description: Created
          content: 
            application/json:
              schema:
                $ref: '#/components/schemas/Visit'
          headers:
            Location:
              description: URI of new item.
              explode: false
              required: true
              schema:
                minLength: 1
                nullable: false
                type: string
              style: simple 
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          $ref: '#/components/responses/Conflict'
        '500':
          $ref: '#/components/responses/ServerError'
  '/visits/{date_range}':
    description: Get all guest visits during a certain range of dates
    parameters:
      - name: date_range
        in: path
        required: true
        description: the date range for report generating ( start_date + end_date )
        schema:
          $ref: '#/components/schemas/DateRange'
    get:
      description: All visits in a given range
      operationId: retrieveVisits
      x-eov-operation-handler: endpoints
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:  
                $ref: '#/components/schemas/VisitArray'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
  /version:
    description: Get current API version number
    get:
      description: Gets current operating version of the API
      operationId: getAPIVersion
      x-eov-operation-handler: endpoints
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIVersion'
components:
  responses:
    BadRequest:
      description: The request was malformed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/EovError'
    Conflict:
      description: Conflict
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/EovError'
    NotFound:
      description: The specified resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/EovError'
    ServerError:
      description: There was an error in the server.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/EovError'
  schemas:
    EovError:
      description: Not Acceptable
      type: object
      example:
        message: '.response should have required property ''BNMID'''
        errors:
          - path: .response.BNMID
            message: should have required property 'BNMID'
            errorCode: required.openapi.validation
      properties:
        message:
          type: string
        errors:
          type: array
          items:
            type: object
            properties:
              path:
                type: string
              message:
                type: string
              errorCode:
                type: string
    Guest:
      example:
        BNMID: "AW0123456"
        Resident: "Yes" 
        Grad_Year: 2024
        Grad: "UG"
        Year_Issued: 2023
      description: Guest object
      type: object
      properties:
        BNMID:
          $ref: '#/components/schemas/BNMID'
        Resident:
          $ref: '#/components/schemas/Resident'
        Grad_Year:
          $ref: '#/components/schemas/Grad_Year'
        Grad:
          $ref: '#/components/schemas/Grad'
        Year_Issued:
          $ref: '#/components/schemas/Year_Issued'
      required:
        - BNMID
        - Resident
        - Grad_Year
        - Grad
        - Year_Issued
    GuestArray:
      type: array
      items:
        $ref: '#/components/schemas/Guest'
    Visit:
      example:
        BNMID: "AW0123456"
        Date: "04-25-2023"
      description: Visit object
      type: object
      properties:
        BNMID:
          $ref: '#/components/schemas/BNMID'
        Date:
          $ref: '#/components/schemas/Date'
      required:
        - BNMID
        - Date
    VisitArray:
      type: array
      items:
        $ref: '#/components/schemas/Visit'
    BNMID:
      example: "AW0123456"
      description: Bear Necessities Market identifier
      pattern: ^[a-zA-Z0-9]{9}$ 
      type: string
    Resident:
      example: "Yes"
      description: Whether the guest lives on campus or not
      type: string
    Grad_Year:
      description: Year of graduation.
      example: 2024
      maxLength: 4
      type: number
    Grad:
      description: Graduation Status - Graduate or Undergrad.
      example: "UG"
      pattern: ^(G|UG)$
      maxLength: 2
      type: string
    Date:
      example: "04-12-2023"
      description: Date of guest's visit
      type: string
      pattern: \d{1,2}\-\d{1,2}\-\d{2,4}$
    DateRange:
      example: "04-12-2023+05-25-2023"
      description: Date range for generating reports of guest visits in that time range
      type: string
    Year_Issued:
      description: The year in which the relevant BNM ID card was issued to the Guest.
      example: 2020
      type: number
      maxLength: 4
    APIVersion:
      example: 1.2.3
      description: Current operating version of the API
      pattern: ^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$
      type: string
